#!/bin/bash

# Defina os par칙metros
nome_usuario="seu_nome_usuario"
lista_hosts=("host1" "host2" "host3")
diretorio_destino="/caminho/do/diretorio"
arquivo_origem="/caminho/do/arquivo.tar.gz"

# Cria o usu치rio nos hosts
for host in "${lista_hosts[@]}"; do
    ssh "$host" sudo useradd "$nome_usuario"
done

# Cria o diret칩rio nos hosts
for host in "${lista_hosts[@]}"; do
    ssh "$host" sudo mkdir -p "$diretorio_destino"
done

# Copia o arquivo para o diret칩rio nos hosts
for host in "${lista_hosts[@]}"; do
    scp "$arquivo_origem" "$host:$diretorio_destino"
done

# Descompacta o arquivo nos hosts
for host in "${lista_hosts[@]}"; do
    ssh "$host" "sudo tar -xzf $diretorio_destino/arquivo.tar.gz -C $diretorio_destino"
done
